<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <title>Paul Yim Blog: Cryogen-使用Clojure编写的一个静态网站生成器</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/paulyim/paulyim.github.io/master/img/favicon.jpg">
    <link rel="stylesheet" type="text/css"
          href="http://fonts.googleapis.com/css?family=Raleway:400,100,600,500,300,200,700,800,900">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-34647922-1', 'auto');
      ga('send', 'pageview');
    </script>
</head>
<body id="top">
<div id="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <h1><a class="navbar-brand" href="/index.html">
                    <strong>PAUL</strong> YIM <span style="font-size:45%; font-weight:400">BLOG</span>
                </a></h1>
            </div>
            <!-- nav links-->
            <div id="navbar" class="navbar-collapse collapse">
                <ul id="menu" class="nav navbar-nav navbar-right">
                    <li><a href="/index.html">首页</a></li>
                    <li><a href="/archives.html">归档</a></li>

                    
                    <li>
                    <a href="/pages-output/about.html">关于</a>
                    </li>
                    

                    <li><a href="/feed.xml">RSS</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="main">
        <div id="sidebar">
            
            <h3>最近发表</h3>
            <ul id="recent">
                
                <li><a href="/posts-output/2014-03-11-Cryogen文档-配置.html">Cryogen文档-配置</a></li>
                
                <li><a href="/posts-output/2014-03-11-Cryogen文档-目录结构.html">Cryogen文档-目录结构</a></li>
                
                <li><a href="/posts-output/2014-03-10-Cryogen-使用clojure编写的一个静态网站生成器.html">Cryogen-使用Clojure编写的一个静态网站生成器</a></li>
                
            </ul>
            
            
            <h3>标签分类</h3>
            <ul id="tags">
                
                <li><a href="/tags-output/cryogen.html">cryogen</a></li>
                
            </ul>
            
        </div>
        <div id="content-wrapper">
            <div id="content">
            <div id="post">
                
<div id="post">
    <div class="post-header" style="margin-bottom: 30px; padding-bottom: 5px; border-bottom: 1px solid #d3d3d3">   
    <h2 style="margin:0px; padding-bottom:2px">Cryogen-使用Clojure编写的一个静态网站生成器</h2>
    <div id="post-meta">
        <div class="date">2014-03-10</div>
        
    </div>
</div>
<div>
    <ol class="content"><li><a href="#特性">特性</a></li><li><a href="#安装条件">安装条件</a></li><li><a href="#开始使用">开始使用</a></li><ol><li><a href="#使用_lein_创建一个新的模板项目">使用 lein 创建一个新的模板项目</a></li><li><a href="#运行项目">运行项目</a></li><li><a href="#站点配置">站点配置</a></li><li><a href="#markdown_或者_asciidoc">Markdown 或者 AsciiDoc</a></li><li><a href="#设置网站主题">设置网站主题</a></li><li><a href="#自定义网站布局">自定义网站布局</a></li><li><a href="#代码语法高亮">代码语法高亮</a></li></ol><li><a href="#发布你的站点">发布你的站点</a></li></ol>
    <p> <strong>本博客站点使用 <a href='http://cryogenweb.org/index.html'>Cryogen</a> + <a href='https://pages.github.com/'>Github Pages</a> 搭建而成。</strong></p><p> 本文只作 Cyrogen 的介绍，关于 Github Pages 可查看官方文档或参看这篇博文：<a href='http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html'>搭建一个免费的，无限流量的Blog&mdash;-github Pages和Jekyll入门</a></p><h2><a name="特性"></a>特性</h2><ul><li>使用 Markdown (默认) 或者 AsciiDoc 发布博文或页面</li><li>文章支持标签分类</li><li>生成表格内容</li><li>支持原生的 HTML 页面</li><li>代码高亮</li><li>支持 Disqus</li><li>生成网站地图</li><li>生成 RSS</li><li>可编译 Sass/SCSS 文件</li></ul><h2><a name="安装条件"></a>安装条件</h2><p>需要安装好 <a href='https://github.com/technomancy/leiningen'>Leiningen</a> 2.5.0 或以上版本。</p><h2><a name="开始使用"></a>开始使用</h2><h3><a name="使用&#95;lein&#95;创建一个新的模板项目"></a>使用 lein 创建一个新的模板项目</h3><p>使用以下命令创建一个 Cryogen 站点模板：</p><pre><code>lein new cryogen my-blog
</code></pre><h3><a name="运行项目"></a>运行项目</h3><p>lein 带有内置的 web 容器，在生成的 <code>my-blog</code> 根目录执行以下命令：</p><pre><code>lein ring server
</code></pre><p>ring 容器被启动后，项目 <code>resources/templates</code> 目录的内容更改会被自动同步更新。</p><h3><a name="站点配置"></a>站点配置</h3><p>通过 <code>templates/config.edn</code> 文件可以配置站点信息，如下所示：</p><pre><code class="clojure">{:site-title         &quot;My Awesome Blog&quot;
 :author             &quot;Bob Bobbert&quot;
 :description        &quot;This blog is awesome&quot;
 :site-url           &quot;http://blogawesome.com/&quot;
 :post-root          &quot;posts&quot;
 :page-root          &quot;pages&quot;
 :post-root-uri      &quot;posts-output&quot;
 :page-root-uri      &quot;pages-output&quot;
 :tag-root-uri       &quot;tags-output&quot;
 :author-root-uri    &quot;authors-output&quot;
 :blog-prefix        &quot;/blog&quot;
 :rss-name           &quot;feed.xml&quot;
 :rss-filters        &#91;&quot;cryogen&quot;&#93;
 :recent-posts       3
 :post-date-format   &quot;yyyy-MM-dd&quot;
 :sass-src           nil
 :sass-dest          nil
 :theme              &quot;blue&quot;
 :resources          &#91;&quot;img&quot;&#93;
 :keep-files         &#91;&quot;.git&quot;&#93;
 :disqus?            false
 :disqus-shortname   &quot;&quot;
 :ignored-files      &#91;#&quot;\.#.&#42;&quot; #&quot;.&#42;\.swp$&quot;&#93;
 :posts-per-page     5
 :blocks-per-preview 2
 :previews?          false
 :clean-urls?        true}
</code></pre><p>详细说明可以参考官方文档 <a href='http://cryogenweb.org/docs/configuration.html'>"Configuration"</a></p><h3><a name="markdown&#95;或者&#95;asciidoc"></a>Markdown 或者 AsciiDoc</h3><p>Cryogen 默认使用 Markdown 生成站点内容，如果想使用 AsciiDoc，修改项目（e.g. <code>my-blog</code>）<code>project.clj</code> 文件的 <code>:dependencies</code> 属性，将 <code>cryogen-markdown</code> 改为 <code>cryogen-asciidoc</code> 即可。</p><p><code>cryogen-markdown</code> ：编译器会编译 <code>resources/templates/md</code> 目录下以 <code>.md</code> 的文件。</p><p><code>cryogen-markdown</code> ：编译器会编译 <code>resources/templates/asc</code> 目录下以 <code>.asc</code> 的文件。</p><h3><a name="设置网站主题"></a>设置网站主题</h3><p>Cryogen 自带了两个主题模板，通过 <code>resources/templates/themes</code> 目录的 <code>config.edn</code> 文件的属性 <code>:theme</code> 进行配置。</p><h3><a name="自定义网站布局"></a>自定义网站布局</h3><p>Cryogen 使用 <a href='https://github.com/yogthos/Selmer'>Selmer</a> 模板引擎定义网站布局，具体用法请参考官方文档。</p><p>布局文件被放在项目的  <code>resources/templates/themes/{theme}/html</code> 目录下，<code>base.html</code> 作为站点的默认布局文件，可以在这个文件加入你的 CSS 和 JavaScript 静态资源。</p><p>在发布站点文章时，通过 <code>:layout</code> 属性指定布局样式，每个 <code>.html</code> 页面都应该继承 <code>base.html</code> 这个文件，通过 Selmer 模板技术的属性 <code>content</code> 区分每个页面的内容，如下所示：</p><pre><code class="xml">{% extends &quot;templates/html/layouts/base.html&quot; %}
{% block content %}
&lt;div id=&quot;posts-by-tag&quot;&gt;
    &lt;h2&gt;Posts tagged {{name}}&lt;/h2&gt;
    &lt;ul&gt;
    {% for post in posts %}
        &lt;li&gt;
            &lt;a href=&quot;{{post.uri}}&quot;&gt;{{post.title}}&lt;/a&gt;
        &lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
&lt;/div&gt;
{% endblock %}
</code></pre><h3><a name="代码语法高亮"></a>代码语法高亮</h3><p>Cryogen 使用 <a href='https://highlightjs.org/'>Highlight.js</a> 支持代码语法高亮，通过 <code>templates/js/highlight.pack.js</code> 文件可以添加更多语言。</p><p> <code> initHighlightingOnLoad</code>  函数在 <code>{theme}/html/base.html</code> 已被调用。</p><pre><code class="xml">&lt;script&gt;hljs.initHighlightingOnLoad&#40;&#41;;&lt;/script&gt;
</code></pre><h2><a name="发布你的站点"></a>发布你的站点</h2><p>网站静态内容被生成在 <code>resources/public</code> 这个目录，将这个目录下的内容发布到你的服务器即可。</p><p>以下为 Nginx 容器的部署文件示例，如果是 linux 操作系统，文件通常被放在：<code>/etc/nginx/sites-available/default</code></p><pre><code class="javascript">server {
  listen 80 default&#95;server;
  listen &#91;::&#93;:80 default&#95;server ipv6only=on;
  server&#95;name localhost &lt;yoursite.com&gt; &lt;www.yoursite.com&gt;;

  access&#95;log  /var/log/blog&#95;access.log;
  error&#95;log   /var/log/blog&#95;error.log;

  location / {
    alias       /var/blog/;
    error&#95;page  404 = /404.html;
  }
}
</code></pre><p>将 <code>yoursite.com</code> 换成你的站点域名，然后将项目 <code>resources/public</code> 下的内容复制到 <code>/var/blog/</code>，最后，你还应该添加一个文件<code>/var/blog/404.html</code>，完成。</p><p>更多关于部署的信息请参考官方文档 <a href='http://cryogenweb.org/docs/deploying-to-github-pages.html'>这里</a>。</p>
</div>
<!-- post-footer div gets closed in home/post -->
<div id="post-footer">
    
    <div id="post-tags">
        <b>标签分类: </b>
        
        <a href="/tags-output/cryogen.html">cryogen</a>
        
    </div>
    
</div>
    <div id="prev-next">
        
        <a href="/posts-output/2014-03-11-Cryogen文档-目录结构.html">&laquo; Cryogen文档-目录结构</a>
        
        
    </div>

    


</div>

            </div>
            </div>
        </div>
    </div>
    <footer class="site-footer">
        <p>Copyright &copy; 2014 - <span id="cpyear"></span> <span>Paul Yim</span></p>
        <p>Powered by <a href="http://cryogenweb.org">Cryogen</p>
        <a href="#top">返回顶部</a>
    </footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/headroom.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
